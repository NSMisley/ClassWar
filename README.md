# ClassWar
The history of all hitherto existing society is the history of ClassWar.

ClassWar is a tool to assist the archival of Regional Message Boards on the online browser game NationStates.

## Generating an RMB archive

1. Upload the files in `serverside-files` to a secure area on your web server. This needs to be accessible from scripts elsewhere on your server.

2. In `classwar.php`, remove the comment (`//`) before `$useragent` on line 3 and change `CHANGETHISTOYOURNATION` to your nation name.
 
3. Either access ClassWar via a browser (for small regions only! large RMBs can't be archived this way) like so: `https://yourwebsite.url/classwar.php?region=the_internationale` OR via the command line, like so: `php -e classwar.php -r "the internationale"` (Note: If you don't set up .htaccess for this file, any visitor to your website can invoke this module and potentially push you over the rate limit. You can remove classwar.php from your server once you have finished downloading the RMB into your SQL file.

4. Congratulations! You're the new owner of a SQL file with the contents of your requested RMB.

## Displaying the RMB archive

ClassWar displays RMB archives through DataTables, which requires jQuery. If you cannot edit the `<head>` element of your web page to add links to the jQuery and DataTables JavaScript files, you will not be able to use ClassWar.

1. Make sure you have a SQL file generated by `classwar.php`. If you don't, go back up and follow the steps in "Generating an RMB archive" above.

2. Import the SQL file into your table. The easiest way to do this is through the shell, e.g. `mysql -h mysql.yourwebsite.url -u username -p database_name < classwar_testregionia.sql`

3. Once you have imported your SQL table, upload the files in `public-files` to an area in your web server that is publicly accessible.

4. Edit `classwar-config.php` and change the values of each variable to match your webserver and MySQL server. **It's recommended to set up a user specifically for ClassWar that only has SELECT permissions on the RMB archive table for security.**

5. Add the following to the `<body>` block of the web page you will be displaying the RMB archive on:
```
<table id="rmb" class="rmbtable2" style="width:100%;"></table>
<div id="quotebox">
    <textarea id="message" style="width:100%; height: 112px; min-height: 18em; display: none;" wrap="soft" class="text-input" readonly onClick="this.select();"></textarea>
</div>
```
Then add the following to the `<head>` block of the web page you will be displaying the RMB archive on:
```
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/jq-2.2.3/dt-1.10.12/datatables.min.css"/>
<link rel="stylesheet" type="text/css" id="classwar" href="classWar.css" media="all" />
<script type="text/javascript" src="https://cdn.datatables.net/v/dt/jq-2.2.3/dt-1.10.12/datatables.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/plug-ins/1.10.12/pagination/input.js"></script>
<script type="text/javascript" src="classWar.js"></script>
```

## What if I don't have a web server?

Well, then you can't use ClassWar. It's designed to work with a MySQL database to display RMB posts (more on that coming later), which you can't do without a web server.

## License

ClassWar (specifically, `classwar.php` and `cw-rmbhandler.php`) is licensed through the BSD 3-Clause license.

ClassWar includes the BBCode parser "NBBC," modified by me to handle NSCode for ClassWar. NBBC is licensed under the BSD 2-Clause license.

ClassWar includes the "NationStates" font which is copyright NationStates.net and the authors below.

ClassWar relies on the DataTables jQuery plugin, which is licensed under the MIT license.

The icons included in the NationStates font are from the following font libraries:

### Font Awesome

   Copyright (C) by Dave Gandy.

   Author:    Dave Gandy
   License:   Font: OFL (http://scripts.sil.org/OFL)
   Homepage:  http://fortawesome.github.com/Font-Awesome/


### Entypo

   Copyright (C) by Daniel Bruce.

   Author:    Daniel Bruce
   License:   OFL (http://scripts.sil.org/OFL)
   Homepage:  http://www.entypo.com


### Modern Pictograms

   Copyright (C) by John Caserta. All rights reserved.

   Author:    John Caserta
   License:   OFL (http://scripts.sil.org/OFL)
   Homepage:  http://thedesignoffice.org/project/modern-pictograms/


### Typicons

   Copyright (C) by Stephen Hutchings.

   Author:    Stephen Hutchings
   License:   Font: OFL (http://scripts.sil.org/OFL), Icons: CC BY-SA 3.0 (https://creativecommons.org/licenses/by-sa/3.0/)
   Homepage:  http://typicons.com/


### Maki

   Copyright (C) Mapbox

   Author:    Mapbox
   License:   CC0 1.0 Universal (https://creativecommons.org/publicdomain/zero/1.0/)
   Homepage:  https://www.mapbox.com/maki-icons/
